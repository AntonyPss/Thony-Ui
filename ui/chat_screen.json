{
	"namespace": "chat",

  "keyboard_button": {
		"size": [ 24, 24 ]
  },

  "send_button@small_button": {
    "$pressed_button_name": "button.send",
		"$button_content": "chat.send_image",
    "$tts_enabled|default": true,
    "focus_enabled": "$tts_enabled",
    "$focus_id": "send_button_focus_id",
    "$focus_override_up": "paste_button_focus_id",

    "$button_content_panel": "chat.send_panel",
    "$button_tts_header": "#send_button_accessibility_text",
		"size": [ 48, 24 ],
    "bindings": [
      {
        "binding_name": "#send_button_visible",
        "binding_name_override": "#enabled"
      },
      {
        "binding_name": "#send_button_accessibility_text"
      }
    ]
  },

	"messages_text/text": {
		"shadow": true
	},

	"messages_scrolling_panel": {
		"anchor_from": "bottom_middle",
		"anchor_to": "bottom_middle",
		"size": [ "100% - 4px", "100% - 48px" ],
		"offset": [ 0, -24 ]
	},

	"commands_panel": {
		"size": [ "100% - 4px", "100% - 48px" ],
		"offset": [ 1, -24 ]
	},

	"position_text_panel": {
		"type": "panel",
		"size": [ "100%", "100%" ],
		"controls": [
			{
				"text": {
					"type": "label",
					"text": "XYZ",
					"text_alignment": "center",
					"anchor_from": "center",
					"anchor_to": "center",
					"layer": 2,
					"color": "$text_color",
					"size": [ "100%", 10 ]
				}
			}
		]
	},

	"chat_header@common_assets.store_top_bar": {
    "anchor_to": "top_left",
    "anchor_from": "top_left",
		"layer": 4,
		"controls": [
			{
				"back_content@common.back_content_panel": {
					"offset": [ 2, 0 ]
				} 
			},
			{
				"title_panel": {
					"type": "panel",
					"anchor_from": "top_left",
					"anchor_to": "top_left",
					"size": [ "100%c", "100%" ],
					"controls": [
						{
							"text": {
								"type": "label",
								"text": "#text",
								"font_scale_factor": 1.2,
								"font_type": "MinecraftTen",
								"layer": 4,
								"color": "$title_text_color",
								"size": [ "default", "100%" ],
								"offset": [ 20, 2 ],
								"bindings": [
									{
										"binding_name": "#chat_title_text",
										"binding_name_override": "#text"
									}
								]
							}
						}
					]
				}
			},
			{
				"popup_dialog_factory": {
					"type": "factory",
					"control_ids": {
						"toast_message": "@chat.popup_toast"
					}
				}
			},
			{
				"chat_header_content_area": {
					"type": "panel",
					"anchor_from": "right_middle",
					"anchor_to": "right_middle",
					"size": [ "100%cm", "100%c" ],
					"controls": [
						{
							"stack_content": {
								"type": "stack_panel",
								"orientation": "horizontal",
								"anchor_from": "right_middle",
								"anchor_to": "right_middle",
								"size": [ "100%c", "100%cm" ],
								"offset": [ -2, -1 ],
								"controls": [
									{
										"host_main@common_buttons.light_content_button": {
											"ignored": "$is_pregame",
											"$pressed_button_name": "button.host_toggle",
											"$button_content": "host_options.host_image_panel",
											"$focus_id": "host_main_button_focus_id",
											"$focus_override_up": "coordinate_dropdown_focus_id",
											"size": [ 18, 18 ],
											"bindings": [
												{
													"binding_name": "#cheats_on",
													"binding_name_override": "#enabled"
												},
												{
													"binding_name": "#host_main_button_focus_override_up",
													"binding_name_override": "#focus_change_up"
												},
												{
													"binding_name": "#host_main_button_focus_override_down",
													"binding_name_override": "#focus_change_down"
												}
											]
										}
									},
									{
										"show_coordinates_toggle@common_toggles.light_text_toggle": {
											"$toggle_view_binding_name": "coordinates_toggle_panel",
											"$toggle_name": "coordinates_toggle",
											"$button_type_panel": "chat.position_text_panel",
											"size": [ 28, 18 ]
										}
									}
								]
							}
						}
					]
				}
			}
		]
	},

  "coordinate_buttons_panel": {
    "type": "panel",

    "$radio_toggle_group": true,

		"$default_texture": "textures/ui/button_borderless_light",
		"$hover_texture": "textures/ui/button_borderless_light",
		"$pressed_texture": "textures/ui/button_borderless_lighthover",
		"$pressed_no_hover_texture": "textures/ui/button_borderless_lighthover",

    "size": [ "100%", 16 ],
    "controls": [
      {
        "player_position@common_toggles.dark_text_toggle": {
          "$toggle_name": "#coordinate_type_position",
          "$toggle_state_binding_name": "#coordinate_type_position",
          "$button_text": "chat.coordinateTypeFacing",
          "bindings": [
            {
              "binding_name": "#coordinate_type_facing",
              "binding_name_override": "#visible"
            }
          ]
        }
      },
      {
        "block_position@common_toggles.dark_text_toggle": {
          "$toggle_name": "#coordinate_type_facing",
          "$toggle_state_binding_name": "#coordinate_type_facing",
          "$button_text": "chat.coordinateTypePosition",
          "bindings": [
            {
              "binding_name": "#coordinate_type_position",
              "binding_name_override": "#visible"
            }
          ]
        }
      }
    ]
  },

	"coordinates_toggle_panel": {
		"type": "image",
		"texture": "textures/ui/greyBorder",
		"anchor_from": "top_right",
		"anchor_to": "top_right",
		"layer": 99,
		"size": [ "100%c + 10px", "100%c + 10px" ],
		"offset": [ -2, 26 ],
		"bindings": [
			{
				"binding_type": "view",
				"source_control_name": "coordinates_toggle_panel",
				"source_property_name": "#toggle_state",
				"target_property_name": "#visible"
			}
		],
		"controls": [
			{
				"stack_content": {
					"type": "stack_panel",
					"size": [ 124, "100%c" ],
					"controls": [
						{
							"horizontal": {
								"type": "stack_panel",
								"orientation": "horizontal",
								"size": [ "100%", 32 ],
								"controls": [
									{
										"coordinate_text_panel": {
											"type": "panel",
											"size": [ "fill", "100%" ],
											"controls": [
												{
													"coordinates_text": {
														"type": "label",
														"text": "#text",
														"text_alignment": "center",
														"layer": 24,
														"shadow": true,
														"size": [ "100%", "default" ],
														"bindings": [
															{
																"binding_name": "#coordinates_text",
																"binding_name_override": "#text"
															}
														]
													}
												}
											]
										}
									},
									{
										"vertical": {
											"type": "stack_panel",
											"size": [ 16, 32 ],
											"controls": [
												{
													"copy@copy_coordinate_button": {
														"size": [ 16, "50%" ]
													}
												},
												{
													"paste@paste_button": {
														"size": [ 16, "50%" ]
													}
												}
											]
										}
									}
								]
							}
						},
						{
							"coordinate_buttons@coordinate_buttons_panel": {
								"size": [ "100%", 16 ]
							}
						}
					]
				}
			}
		]
	},

	"chat_bottom_panel": {
		"size": [ "100%", 24 ],
		"min_size": [ "100%", 24 ],
    "modifications": [
			{
				"control_name": "host_main_button",
				"operation": "remove"
			},
      {
        "control_name": "text_box",
        "operation": "insert_before",
        "value": [
           { "previous_button@chat.previous_button": {} },
           { "next_button@chat.next_button": {} }
        ]
      },
      {
        "control_name": "text_box",
        "operation": "insert_after",
        "value": [
          {
            "auto_complete_buttons_panel": {
              "type": "stack_panel",
              "orientation": "horizontal",
              "size": [ "100%c", "100%" ],
              "bindings": [
                {
                  "binding_name": "(not #chat_visible)",
                  "binding_name_override": "#visible"
                }
              ],
              "controls": [
                { "autocompleteback_button@chat.autocompleteback_button": {} },
                { "autocomplete_button@chat.autocomplete_button": {} }
              ]
            }
          }
        ]
      }
    ]
	},

  "previous_image": {
    "type": "image",
    "size": [ 13, 13 ],
    "texture": "textures/ui/chat_previous"
  },

  "next_image": {
    "type": "image",
    "size": [ 13, 13 ],
    "texture": "textures/ui/chat_next"
  },

  "autocomplete_image": {
    "type": "image",
    "size": [ 14, 14 ],
    "texture": "textures/ui/chat_autocomplete"
  },

  "autocompleteback_image": {
    "type": "image",
    "size": [ 14, 14 ],
    "texture": "textures/ui/chat_autocompleteback"
  },

  "chat_settings_button": {
    "$focus_override_right": "",
		"size": [ 24, 24 ]
  },

  "small_button@common_buttons.dark_glyph_button": {
    "$pressed_button_name|default": "",
    "$button_content|default": "",
    "size": [ 24, 24 ]
  },

  "small_glyph_button@common_buttons.dark_glyph_button": {
    "$pressed_button_name|default": "",
    "$button_content|default": "",
    "size": [ 24, 24 ]
  },

  "text_edit_box": {
    "$text_edit_text_control": "message_text_box_display_text",
    "$place_holder_text": "chat.placeHolderText",
    "$focus_override_left": "",
    "$focus_override_right": "",
		"size": [ "fill", 24 ]
  },

  "autocomplete_button@chat.small_glyph_button": {
    "$button_content": "chat.autocomplete_image",
    "$pressed_button_name": "button.chat_autocomplete",
    "$focus_id": "autocomplete_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.autocomplete"
  },

  "autocompleteback_button@chat.small_glyph_button": {
    "$button_content": "chat.autocompleteback_image",
    "$pressed_button_name": "button.chat_autocomplete_back",
    "$focus_id": "autocompleteback_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.autocompleteback"
  },

  "previous_button@chat.small_glyph_button": {
    "$button_content": "chat.previous_image",
    "$pressed_button_name": "button.chat_previous_message",
    "$focus_id": "previous_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.previous"
  },

  "next_button@chat.small_glyph_button": {
    "$button_content": "chat.next_image",
    "$pressed_button_name": "button.chat_next_message",
    "$focus_id": "next_button_focus_id",
    "$button_tts_header": "accessibility.chat.tts.next"
  },

  "auto_complete_panel_contents_with_item/autocomplete_button": {
    "bindings": [
      {
        "binding_type": "collection_details",
        "binding_collection_name": "auto_complete",
        "binding_condition": "always"
      },
      {
        "binding_type": "collection",
        "binding_name": "#auto_complete_text",
        "binding_collection_name": "auto_complete"
      },
      {
        "binding_type": "view",
        "source_property_name": "(#auto_complete_text - '/')",
        "target_property_name": "#filtered_command_text"
      },
      {
        "binding_type": "view",
        "source_control_name": "message_text_box_display_text",
        "source_property_name": "#item_name",
        "target_property_name": "#text_box_item"
      },
      {
        "binding_type": "view",
        "source_property_name": "((not (#auto_complete_text = '')) and ((#auto_complete_text - #text_box_item) = #filtered_command_text))",
        "target_property_name": "#visible"
      }
    ]
  },

	"chat_screen_content": {
		"modifications": [
			{
				"array_name": "controls",
				"operation": "insert_front",
				"value": [
					{
						"coordinates@chat.coordinates_toggle_panel": {}
					}
				]
			}
		]
	},

	"chat_screen": {
    // "$header_safezone_control": "common.store_top_bar_filler",
    "$header_bar_control": "common_assets.store_top_bar",
    "close_on_player_hurt": false
	}
}